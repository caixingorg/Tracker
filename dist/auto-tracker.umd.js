!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).AutoTracker={})}(this,(function(e){"use strict";const t={appId:"",debug:!1,beacon:{url:"https://analytics.example.com/collect",batchSize:10,delay:5e3,retryCount:3,useBeacon:!0,compression:!0,timeout:1e4},sampling:{performance:.3,error:1,behavior:.1},events:{click:!0,scroll:!0,pageView:!0,hashChange:!0,historyChange:!0,formSubmit:!0,inputChange:!1},performance:{webVitals:!0,resourceTiming:!0,firstScreenTiming:!0,fps:!1,memory:!1,timing:!0},errors:{jsError:!0,promiseError:!0,resourceError:!0,ajaxError:!0,consoleError:!1,sourceMap:!0,alertThreshold:10,ignoreErrors:[/Script error/i,/ResizeObserver loop limit exceeded/i]},advanced:{spa:!0,hashRouter:!1,sessionTimeout:1800,maxBreadcrumbs:100,autoTrack:!0,enableInIframe:!1,privacy:{maskSensitiveData:!0,anonymizeIP:!0,respectDoNotTrack:!0,maskTextContent:!1}}};function r(e,t=!0){if(!e||e.nodeType!==Node.ELEMENT_NODE)return"";if(e.id&&t)return"#"+e.id;let i=e.tagName.toLowerCase();if(e.classList&&e.classList.length&&t){i+=Array.from(e.classList).slice(0,2).map((e=>"."+e)).join("")}if(e===document.documentElement||e===document.body)return i;if(e.parentElement){if(!t||!e.id){const t=Array.from(e.parentElement.children).filter((t=>t.tagName===e.tagName));if(t.length>1){i+=`:nth-of-type(${t.indexOf(e)+1})`}}const n=t?r(e.parentElement,!1).split(" ").slice(-2).join(" "):r(e.parentElement,!1);return n?`${n} > ${i}`:i}return i}function i(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}function n(){const{href:e,pathname:t,search:r,hash:i,origin:n}=window.location;return{url:e,path:t,query:r,hash:i,origin:n,title:document.title,referrer:document.referrer}}function s(e){return e>=1||e>0&&Math.random()<e}function o(e,t){const r={...e};return t?(Object.keys(t).forEach((i=>{r[i]=t[i]instanceof Object&&i in e&&e[i]instanceof Object?o(e[i],t[i]):t[i]})),r):r}function a(e,t){let r=null;return function(...i){r&&clearTimeout(r),r=setTimeout((()=>{e.apply(this,i)}),t)}}function c(e){const t={sendBeacon:"sendBeacon"in navigator,performance:"performance"in window,performanceObserver:"PerformanceObserver"in window,mutationObserver:"MutationObserver"in window,intersectionObserver:"IntersectionObserver"in window,resizeObserver:"ResizeObserver"in window,localStorage:(()=>{try{return localStorage.setItem("test","test"),localStorage.removeItem("test"),!0}catch(e){return!1}})(),sessionStorage:(()=>{try{return sessionStorage.setItem("test","test"),sessionStorage.removeItem("test"),!0}catch(e){return!1}})(),webWorker:"Worker"in window,serviceWorker:"serviceWorker"in navigator,fetch:"fetch"in window,promise:"Promise"in window};return e in t&&t[e]}class d{constructor(e){this.reportCallback=e,this.isInitialized=!1,this.mutationObserver=null,this.intersectionObserver=null,this.eventHandlers={},this.historyStateStack=[],this.lastScrollPosition=0,this.lastScrollTime=0,this.breadcrumbs=[],this.maxBreadcrumbs=t.advanced.maxBreadcrumbs||100,this.isMutationObserverSupported="MutationObserver"in window,this.isIntersectionObserverSupported="IntersectionObserver"in window}init(){this.isInitialized||(this.isInitialized=!0,this.isMutationObserverSupported&&t.events.click&&this.observeDOM(),this.isIntersectionObserverSupported&&this.observeElementExposure(),t.events.click&&this.trackEvent("click","click",this.handleClick.bind(this)),t.events.scroll&&this.trackEvent("scroll","scroll",function(e,t){let r=0;return function(...i){const n=Date.now();if(n-r>=t)return r=n,e.apply(this,i)}}(this.handleScroll.bind(this),200)),t.events.formSubmit&&this.trackEvent("submit","submit",this.handleFormSubmit.bind(this)),t.events.inputChange&&(this.trackEvent("change","change",this.handleInputChange.bind(this)),this.trackEvent("input","input",a(this.handleInputChange.bind(this),500))),t.events.hashChange&&this.trackEvent("hashchange","hashchange",this.handleHashChange.bind(this),window),t.events.historyChange&&this.hookHistoryAPI(),document.addEventListener("visibilitychange",(()=>{"visible"===document.visibilityState&&this.trackPageView()})),window.addEventListener("beforeunload",(()=>{this.reportBreadcrumbs()})),t.events.pageView&&this.trackPageView())}observeDOM(){this.isMutationObserverSupported&&!this.mutationObserver&&(this.mutationObserver=new MutationObserver((e=>{e.forEach((e=>{"childList"===e.type&&e.addedNodes.length&&e.addedNodes.forEach((e=>{e.nodeType===Node.ELEMENT_NODE&&this.addEventListenersToNewElements(e)}))}))})),this.mutationObserver.observe(document.body,{childList:!0,subtree:!0}))}addEventListenersToNewElements(e){this.isClickableElement(e)&&t.events.click&&e.addEventListener("click",this.handleClick.bind(this)),"FORM"===e.tagName&&t.events.formSubmit&&e.addEventListener("submit",this.handleFormSubmit.bind(this)),this.isInputElement(e)&&t.events.inputChange&&(e.addEventListener("change",this.handleInputChange.bind(this)),e.addEventListener("input",a(this.handleInputChange.bind(this),500))),Array.from(e.children).forEach((e=>{this.addEventListenersToNewElements(e)}))}observeElementExposure(){this.isIntersectionObserverSupported&&!this.intersectionObserver&&(this.intersectionObserver=new IntersectionObserver((e=>{e.forEach((e=>{if(e.isIntersecting){const t=e.target;if(this.isImportantElement(t)){const i=r(t),n=this.getElementInfo(t);this.reportEvent("exposure",{selector:i,element:n,visibleRatio:e.intersectionRatio}),this.addBreadcrumb("exposure",{selector:i,element:n.tagName+(n.id?"#"+n.id:"")}),this.intersectionObserver.unobserve(t)}}}))}),{threshold:.5}),this.observeImportantElements())}observeImportantElements(){Array.from(document.querySelectorAll('button, a, [role="button"], [class*="btn"], [id*="btn"], [class*="button"], [id*="button"], [data-track="true"], [class*="banner"], [class*="card"], [class*="item"], img[src*="banner"], img[src*="ad"], video')).forEach((e=>{this.intersectionObserver.observe(e)}))}isImportantElement(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;const t=e.tagName.toLowerCase();if(["button","a","video","audio","canvas"].includes(t))return!0;if("button"===e.getAttribute("role"))return!0;const r=e.className||"",i=e.id||"";if(r.includes("btn")||r.includes("button")||i.includes("btn")||i.includes("button")||r.includes("banner")||r.includes("card")||r.includes("item"))return!0;if("true"===e.getAttribute("data-track"))return!0;if("img"===t){const t=e.getAttribute("src")||"";if(t.includes("banner")||t.includes("ad"))return!0}return!1}isClickableElement(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;const t=e.tagName.toLowerCase();if(["a","button","input","select","textarea","label"].includes(t))return!0;if("button"===e.getAttribute("role"))return!0;const r=e.__events||{};if(r.click&&r.click.length>0)return!0;const i=e.className||"",n=e.id||"";return!!(i.includes("btn")||i.includes("button")||n.includes("btn")||n.includes("button"))||"true"===e.getAttribute("data-track")}isInputElement(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;const t=e.tagName.toLowerCase();return!!["input","select","textarea"].includes(t)||!!e.isContentEditable}getElementInfo(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return{};const r=e.tagName.toLowerCase(),i=e.id||null,n=e.className||null;let s=null,o=null;if(e.textContent&&(s=e.textContent.trim().substring(0,100)),"input"===r||"select"===r||"textarea"===r)if("password"===e.type||"password"===e.name||"password"===e.id)o="******";else if(t.advanced.privacy.maskSensitiveData){const t=(e.name||e.id||"").toLowerCase();o=t.includes("password")||t.includes("pwd")||t.includes("email")||t.includes("phone")||t.includes("mobile")||t.includes("card")||t.includes("account")||t.includes("secret")||t.includes("token")||t.includes("key")?"******":e.value||null}else o=e.value||null;const a={};Array.from(e.attributes).forEach((e=>{["class","id","style"].includes(e.name)||(a[e.name]=e.value)}));const c=e.getBoundingClientRect(),d={x:c.left+window.scrollX,y:c.top+window.scrollY,width:c.width,height:c.height};return{tagName:r,id:i,className:n,text:s,value:o,attributes:a,position:d}}trackEvent(e,t,r,i=document){this.eventHandlers[e]||(this.eventHandlers[e]=r,i.addEventListener(t,r))}handleClick(e){const t=e.target,i=r(t),n=this.getElementInfo(t);this.reportEvent("click",{selector:i,element:n,position:{x:e.clientX,y:e.clientY}}),this.addBreadcrumb("click",{selector:i,element:n.tagName+(n.id?"#"+n.id:"")})}handleScroll(e){const t=Date.now(),r=window.scrollY,i=window.scrollX,n=r>this.lastScrollPosition?"down":"up",s=Math.abs(r-this.lastScrollPosition),o=s/(t-this.lastScrollTime),a=r/(Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)-window.innerHeight)*100;this.reportEvent("scroll",{position:{x:i,y:r},direction:n,distance:s,speed:o,percent:a.toFixed(2)}),this.addBreadcrumb("scroll",{direction:n,percent:Math.round(a)}),this.lastScrollPosition=r,this.lastScrollTime=t}handleFormSubmit(e){const i=e.target,n=r(i),s={action:i.action,method:i.method,fields:[]};Array.from(i.elements).forEach((e=>{if(e.name&&!e.disabled){let r=e.value;("password"===e.type||e.name.toLowerCase().includes("password")||e.name.toLowerCase().includes("pwd")||e.name.toLowerCase().includes("email")||e.name.toLowerCase().includes("phone")||e.name.toLowerCase().includes("mobile")||e.name.toLowerCase().includes("card")||e.name.toLowerCase().includes("account")||e.name.toLowerCase().includes("secret")||e.name.toLowerCase().includes("token")||e.name.toLowerCase().includes("key")||t.advanced.privacy.maskSensitiveData)&&(r="******"),s.fields.push({name:e.name,type:e.type,value:r})}})),this.reportEvent("form_submit",{selector:n,form:s}),this.addBreadcrumb("form_submit",{selector:n,action:s.action})}handleInputChange(e){const t=e.target,i=r(t),n=this.getElementInfo(t);this.reportEvent("input_change",{selector:i,element:n}),this.addBreadcrumb("input_change",{selector:i,element:n.tagName+(n.id?"#"+n.id:"")})}handleHashChange(e){const r=e.oldURL,i=e.newURL;this.reportEvent("hash_change",{oldURL:r,newURL:i,oldHash:new URL(r).hash,newHash:new URL(i).hash}),this.addBreadcrumb("hash_change",{from:new URL(r).hash,to:new URL(i).hash}),t.advanced.spa&&t.advanced.hashRouter&&this.trackPageView()}hookHistoryAPI(){const e=window.history.pushState,r=window.history.replaceState;window.history.pushState=(...r)=>{e.apply(window.history,r),this.historyStateStack.push({state:r[0],title:r[1],url:r[2]}),this.reportEvent("history_change",{type:"pushState",state:r[0],title:r[1],url:r[2]}),this.addBreadcrumb("history_change",{type:"pushState",url:r[2]}),t.advanced.spa&&!t.advanced.hashRouter&&this.trackPageView()},window.history.replaceState=(...e)=>{r.apply(window.history,e),this.historyStateStack.length>0?this.historyStateStack[this.historyStateStack.length-1]={state:e[0],title:e[1],url:e[2]}:this.historyStateStack.push({state:e[0],title:e[1],url:e[2]}),this.reportEvent("history_change",{type:"replaceState",state:e[0],title:e[1],url:e[2]}),this.addBreadcrumb("history_change",{type:"replaceState",url:e[2]}),t.advanced.spa&&!t.advanced.hashRouter&&this.trackPageView()},window.addEventListener("popstate",(e=>{this.reportEvent("history_change",{type:"popstate",state:e.state}),this.addBreadcrumb("history_change",{type:"popstate",url:window.location.href}),t.advanced.spa&&!t.advanced.hashRouter&&this.trackPageView()}))}trackPageView(){const e=n();this.reportEvent("page_view",e),this.addBreadcrumb("page_view",{url:e.url,title:e.title})}addBreadcrumb(e,t){this.maxBreadcrumbs>this.breadcrumbs.length||this.breadcrumbs.shift(),this.breadcrumbs.push({type:e,timestamp:Date.now(),data:t})}reportBreadcrumbs(){0!==this.breadcrumbs.length&&(this.reportEvent("breadcrumbs",{breadcrumbs:this.breadcrumbs}),this.breadcrumbs=[])}reportEvent(e,t){this.reportCallback&&this.reportCallback({type:"event",subType:e,timestamp:Date.now(),data:t})}destroy(){this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=null),this.intersectionObserver&&(this.intersectionObserver.disconnect(),this.intersectionObserver=null),Object.keys(this.eventHandlers).forEach((e=>{document.removeEventListener(e,this.eventHandlers[e])})),this.eventHandlers={},this.reportBreadcrumbs(),this.isInitialized=!1}}class h{constructor(e){this.reportCallback=e,this.isInitialized=!1,this.metricsCollected=new Set,this.observerInstances=[],this.isSupported="performance"in window,this.fpsMonitorId=null,this.lastFrameTime=0,this.frameCount=0,this.fpsList=[],this.firstScreenTimingObserver=null,this.firstScreenRendered=!1,this.domContentLoadedTime=0,this.memoryMonitorId=null}init(){this.isSupported&&!this.isInitialized&&(this.isInitialized=!0,"loading"===document.readyState?document.addEventListener("DOMContentLoaded",(()=>{this.domContentLoadedTime=performance.now(),this.collectNavigationTiming()})):(this.domContentLoadedTime=performance.now(),this.collectNavigationTiming()),window.addEventListener("load",(()=>{setTimeout((()=>{this.collectResourceTiming(),this.collectPaintTiming(),t.performance.firstScreenTiming&&this.startFirstScreenTiming(),t.performance.fps&&this.startFPSMonitoring(),t.performance.memory&&this.startMemoryMonitoring()}),0)})),t.performance.webVitals&&this.initWebVitalsMonitoring(),document.addEventListener("visibilitychange",(()=>{"hidden"===document.visibilityState&&this.reportPerformanceOnHidden()})),window.addEventListener("beforeunload",(()=>{this.reportPerformanceOnHidden()})))}collectNavigationTiming(){if(this.isSupported&&s(t.sampling.performance)&&t.performance.timing)try{const e=performance.getEntriesByType("navigation")[0];if(!e){const e=performance.timing;return void this.reportMetric("navigation_timing",{dnsLookup:e.domainLookupEnd-e.domainLookupStart,tcpConnect:e.connectEnd-e.connectStart,request:e.responseStart-e.requestStart,response:e.responseEnd-e.responseStart,domParse:e.domInteractive-e.responseEnd,domContentLoaded:e.domContentLoadedEventEnd-e.navigationStart,loadEvent:e.loadEventEnd-e.navigationStart,total:e.loadEventEnd-e.navigationStart})}const t={dnsLookup:e.domainLookupEnd-e.domainLookupStart,tcpConnect:e.connectEnd-e.connectStart,tlsNegotiation:e.secureConnectionStart>0?e.connectEnd-e.secureConnectionStart:0,serverTime:e.responseStart-e.requestStart,downloadTime:e.responseEnd-e.responseStart,domParse:e.domInteractive-e.responseEnd,deferredExecutionTime:e.domContentLoadedEventStart-e.domInteractive,domContentLoaded:e.domContentLoadedEventEnd-e.startTime,loadEvent:e.loadEventEnd-e.startTime,total:e.duration,redirectCount:e.redirectCount,redirectTime:e.redirectEnd-e.redirectStart,type:e.type,timeOrigin:performance.timeOrigin};this.reportMetric("navigation_timing",t)}catch(e){console.error("Failed to collect navigation timing:",e)}}collectResourceTiming(){if(this.isSupported&&s(t.sampling.performance)&&t.performance.resourceTiming)try{const e=performance.getEntriesByType("resource");if(!e||0===e.length)return;const r={};e.forEach((e=>{const{initiatorType:i,name:n,duration:s,transferSize:o,decodedBodySize:a}=e;n.includes(t.beacon.url)||(r[i]||(r[i]=[]),r[i].push({name:n,duration:s,transferSize:o,decodedBodySize:a,compressionRatio:a>0&&o>0?(1-o/a).toFixed(2):0}))}));const i={};Object.keys(r).forEach((e=>{const t=r[e],n=t.length;let s=0,o=0;t.forEach((e=>{s+=e.duration,o+=e.transferSize}));const a=n>0?s/n:0,c=n>0?o/n:0,d=t.reduce(((e,t)=>e.duration>t.duration?e:t),{duration:0});i[e]={count:n,totalDuration:s,totalSize:o,avgDuration:a,avgSize:c,slowestResource:{name:d.name,duration:d.duration}}})),this.reportMetric("resource_timing",i),performance.clearResourceTimings()}catch(e){console.error("Failed to collect resource timing:",e)}}collectPaintTiming(){if(this.isSupported&&s(t.sampling.performance))try{const e=performance.getEntriesByType("paint");if(!e||0===e.length)return;const t={};e.forEach((e=>{t[e.name]=e.startTime})),this.reportMetric("paint_timing",t)}catch(e){console.error("Failed to collect paint timing:",e)}}initWebVitalsMonitoring(){if(this.isSupported&&s(t.sampling.performance)&&"PerformanceObserver"in window)try{this.observeFCP(),this.observeLCP(),this.observeCLS(),this.observeFID(),this.observeINP(),this.observeTTFB()}catch(e){console.error("Failed to initialize Web Vitals monitoring:",e)}}observeFCP(){try{const e=new PerformanceObserver((t=>{const r=t.getEntries()[0];r&&(e.disconnect(),this.reportMetric("web_vitals",{name:"FCP",value:r.startTime,rating:this.getRating("FCP",r.startTime)}),this.metricsCollected.add("FCP"))}));e.observe({type:"paint",buffered:!0}),this.observerInstances.push(e)}catch(e){console.error("Failed to observe FCP:",e)}}observeLCP(){try{let e=0;const t=new PerformanceObserver((t=>{const r=t.getEntries();if(r.length>0){e=r[r.length-1].startTime}}));t.observe({type:"largest-contentful-paint",buffered:!0}),this.observerInstances.push(t);const r=()=>{e>0&&!this.metricsCollected.has("LCP")&&(this.reportMetric("web_vitals",{name:"LCP",value:e,rating:this.getRating("LCP",e)}),this.metricsCollected.add("LCP"),t.disconnect())};["visibilitychange","beforeunload"].forEach((e=>{window.addEventListener(e,(()=>{"visibilitychange"===e&&"hidden"!==document.visibilityState||r()}))}))}catch(e){console.error("Failed to observe LCP:",e)}}observeCLS(){try{let e=0,t=[],r=0,i=[],n=0;const s=new PerformanceObserver((s=>{for(const o of s.getEntries())if(!o.hadRecentInput){(0===r||o.startTime-i[i.length-1].startTime>1e3||o.hadRecentInput)&&(n++,r=0,i=[]),r+=o.value,i.push(o),r>e&&(e=r,t=i)}}));s.observe({type:"layout-shift",buffered:!0}),this.observerInstances.push(s);const o=()=>{this.metricsCollected.has("CLS")||(this.reportMetric("web_vitals",{name:"CLS",value:e,rating:this.getRating("CLS",e)}),this.metricsCollected.add("CLS"),s.disconnect())};["visibilitychange","beforeunload"].forEach((e=>{window.addEventListener(e,(()=>{"visibilitychange"===e&&"hidden"!==document.visibilityState||o()}))}))}catch(e){console.error("Failed to observe CLS:",e)}}observeFID(){try{const e=new PerformanceObserver((t=>{const r=t.getEntries()[0];r&&!this.metricsCollected.has("FID")&&(e.disconnect(),this.reportMetric("web_vitals",{name:"FID",value:r.processingStart-r.startTime,rating:this.getRating("FID",r.processingStart-r.startTime)}),this.metricsCollected.add("FID"))}));e.observe({type:"first-input",buffered:!0}),this.observerInstances.push(e)}catch(e){console.error("Failed to observe FID:",e)}}observeINP(){try{if(!("interactionCount"in performance))return;let e=0,t=null;const r=new PerformanceObserver((r=>{r.getEntries().forEach((r=>{const i=r.processingStart-r.startTime;i>e&&(e=i,t={type:r.name,delay:i,target:r.target?this.getElementDescription(r.target):null,time:r.startTime})}))}));r.observe({type:"event",buffered:!0,durationThreshold:16}),this.observerInstances.push(r);const i=()=>{e>0&&!this.metricsCollected.has("INP")&&(this.reportMetric("web_vitals",{name:"INP",value:e,rating:this.getRating("INP",e),event:t}),this.metricsCollected.add("INP"),r.disconnect())};["visibilitychange","beforeunload"].forEach((e=>{window.addEventListener(e,(()=>{"visibilitychange"===e&&"hidden"!==document.visibilityState||i()}))}))}catch(e){console.error("Failed to observe INP:",e)}}observeTTFB(){try{const e=performance.getEntriesByType("navigation")[0];if(e){const t=e.responseStart;this.reportMetric("web_vitals",{name:"TTFB",value:t,rating:this.getRating("TTFB",t)}),this.metricsCollected.add("TTFB")}}catch(e){console.error("Failed to observe TTFB:",e)}}getElementDescription(e){return e&&e instanceof HTMLElement?{tagName:e.tagName.toLowerCase(),id:e.id||null,className:e.className||null,textContent:e.textContent?e.textContent.substring(0,50):null}:null}getRating(e,t){const r={FCP:[1800,3e3],LCP:[2500,4e3],FID:[100,300],CLS:[.1,.25],TTFB:[800,1800],INP:[200,500]};if(!r[e])return"unknown";const[i,n]=r[e];return t>i?t>n?"poor":"needs-improvement":"good"}startFirstScreenTiming(){if(!this.firstScreenRendered&&t.performance.firstScreenTiming)try{if("IntersectionObserver"in window){const e=window.innerHeight,t=Array.from(document.querySelectorAll('img, video, canvas, svg, [class*="banner"], [class*="carousel"], [class*="hero"], [class*="header"]'));if(0===t.length){const r=Array.from(document.querySelectorAll("*"));t.push(...r.filter((t=>{const r=t.getBoundingClientRect();return e>r.top&&r.height>0&&r.width>0})))}let r=0;const i=t.length;this.firstScreenTimingObserver=new IntersectionObserver((e=>{e.forEach((e=>{if(e.isIntersecting&&(r++,this.firstScreenTimingObserver.unobserve(e.target),r>=i||r/i>=.8)){const e=performance.now();this.reportMetric("first_screen_timing",{time:e,domContentLoadedDelta:e-this.domContentLoadedTime}),this.firstScreenRendered=!0,this.firstScreenTimingObserver.disconnect()}}))}),{threshold:.5}),t.forEach((e=>{this.firstScreenTimingObserver.observe(e)})),setTimeout((()=>{if(!this.firstScreenRendered){const e=performance.now();this.reportMetric("first_screen_timing",{time:e,domContentLoadedDelta:e-this.domContentLoadedTime,timeout:!0}),this.firstScreenRendered=!0,this.firstScreenTimingObserver&&this.firstScreenTimingObserver.disconnect()}}),5e3)}}catch(e){console.error("Failed to start first screen timing:",e)}}startFPSMonitoring(){if(!this.fpsMonitorId&&t.performance.fps)try{this.lastFrameTime=performance.now(),this.frameCount=0,this.fpsList=[];const e=()=>{const t=performance.now(),r=t-this.lastFrameTime;if(this.frameCount++,r>=1e3){if(this.fpsList.push(Math.round(1e3*this.frameCount/r)),this.fpsList.length>10&&this.fpsList.shift(),this.fpsList.length%5==0){const e=this.fpsList.reduce(((e,t)=>e+t),0)/this.fpsList.length,t=Math.min(...this.fpsList),r=Math.max(...this.fpsList);this.reportMetric("fps",{avg:e,min:t,max:r,samples:this.fpsList.slice()})}this.lastFrameTime=t,this.frameCount=0}this.fpsMonitorId=requestAnimationFrame(e)};this.fpsMonitorId=requestAnimationFrame(e)}catch(e){console.error("Failed to start FPS monitoring:",e)}}stopFPSMonitoring(){this.fpsMonitorId&&(cancelAnimationFrame(this.fpsMonitorId),this.fpsMonitorId=null)}startMemoryMonitoring(){if(!this.memoryMonitorId&&t.performance.memory)try{if(!performance.memory)return;const e=[],t=()=>{const{totalJSHeapSize:t,usedJSHeapSize:r,jsHeapSizeLimit:i}=performance.memory;if(e.push({total:t,used:r,limit:i,time:performance.now()}),e.length>10&&e.shift(),e.length%5==0){const t=e[e.length-1],r=e[0];this.reportMetric("memory",{current:{total:t.total,used:t.used,limit:t.limit},growth:{total:t.total-r.total,used:t.used-r.used},usageRatio:t.used/t.limit})}};this.memoryMonitorId=setInterval(t,1e4),t()}catch(e){console.error("Failed to start memory monitoring:",e)}}stopMemoryMonitoring(){this.memoryMonitorId&&(clearInterval(this.memoryMonitorId),this.memoryMonitorId=null)}reportPerformanceOnHidden(){["LCP","CLS","INP"].forEach((e=>{if(!this.metricsCollected.has(e)){const t=this.observerInstances.find((t=>t.takeRecords&&t.takeRecords().some((t=>"largest-contentful-paint"===t.entryType&&"LCP"===e||"layout-shift"===t.entryType&&"CLS"===e||"event"===t.entryType&&"INP"===e))));t&&(t.takeRecords(),t.disconnect())}})),this.stopFPSMonitoring(),this.stopMemoryMonitoring(),this.firstScreenTimingObserver&&this.firstScreenTimingObserver.disconnect()}reportMetric(e,r){this.reportCallback&&s(t.sampling.performance)&&this.reportCallback({type:"performance",subType:e,timestamp:Date.now(),data:r})}destroy(){this.observerInstances.forEach((e=>{e&&"function"==typeof e.disconnect&&e.disconnect()})),this.stopFPSMonitoring(),this.stopMemoryMonitoring(),this.firstScreenTimingObserver&&this.firstScreenTimingObserver.disconnect(),document.removeEventListener("visibilitychange",this.reportPerformanceOnHidden),window.removeEventListener("beforeunload",this.reportPerformanceOnHidden),this.isInitialized=!1}}class l{constructor(e){this.reportCallback=e,this.isInitialized=!1,this.errorCache=new Map,this.errorCount=0,this.errorCountStartTime=Date.now(),this.sourceMapCache=new Map,this.consoleErrorOriginal=null,this.breadcrumbs=[],this.isSourceMapSupported=t.errors.sourceMap&&"fetch"in window}init(){this.isInitialized||(this.isInitialized=!0,t.errors.jsError&&this.listenJSErrors(),t.errors.promiseError&&this.listenPromiseErrors(),t.errors.resourceError&&this.listenResourceErrors(),t.errors.ajaxError&&this.listenAjaxErrors(),t.errors.consoleError&&this.listenConsoleErrors(),setInterval((()=>{this.errorCount=0,this.errorCountStartTime=Date.now()}),6e4))}listenJSErrors(){window.addEventListener("error",(e=>{(!e.target||"SCRIPT"!==e.target.nodeName&&"LINK"!==e.target.nodeName&&"IMG"!==e.target.nodeName&&"AUDIO"!==e.target.nodeName&&"VIDEO"!==e.target.nodeName)&&this.handleError(e)}),!0)}listenPromiseErrors(){window.addEventListener("unhandledrejection",(e=>{this.handleError(e)}))}listenResourceErrors(){window.addEventListener("error",(e=>{!e.target||"SCRIPT"!==e.target.nodeName&&"LINK"!==e.target.nodeName&&"IMG"!==e.target.nodeName&&"AUDIO"!==e.target.nodeName&&"VIDEO"!==e.target.nodeName||this.handleError(e)}),!0)}listenAjaxErrors(){const e=XMLHttpRequest.prototype.open,t=XMLHttpRequest.prototype.send,r=window.fetch;XMLHttpRequest.prototype.open=function(...t){return this._autoTracker={method:t[0],url:t[1],startTime:Date.now()},e.apply(this,t)},XMLHttpRequest.prototype.send=function(e){return this._autoTracker&&(this._autoTracker.data=e,this.addEventListener("load",(()=>{if(200>this.status||this.status>=300){const e=Error(`XHR Error: ${this.status} ${this.statusText}`);e.request={method:this._autoTracker.method,url:this._autoTracker.url,data:this._autoTracker.data,status:this.status,statusText:this.statusText,response:this.response,duration:Date.now()-this._autoTracker.startTime},this._autoTracker.self=this,l.prototype.handleError.call(l.prototype,e)}})),this.addEventListener("error",(()=>{const e=Error("XHR Network Error");e.request={method:this._autoTracker.method,url:this._autoTracker.url,data:this._autoTracker.data,duration:Date.now()-this._autoTracker.startTime},l.prototype.handleError.call(l.prototype,e)})),this.addEventListener("timeout",(()=>{const e=Error("XHR Timeout");e.request={method:this._autoTracker.method,url:this._autoTracker.url,data:this._autoTracker.data,duration:Date.now()-this._autoTracker.startTime},l.prototype.handleError.call(l.prototype,e)})),this.addEventListener("abort",(()=>{const e=Error("XHR Aborted");e.request={method:this._autoTracker.method,url:this._autoTracker.url,data:this._autoTracker.data,duration:Date.now()-this._autoTracker.startTime},l.prototype.handleError.call(l.prototype,e)}))),t.apply(this,arguments)},window.fetch=function(e,t){const i=Date.now(),n=t&&t.method?t.method:"GET",s="string"==typeof e?e:e.url,o=t&&t.body?t.body:null;return r.apply(this,arguments).then((e=>{if(!e.ok){const t=Error(`Fetch Error: ${e.status} ${e.statusText}`);t.request={method:n,url:s,data:o,status:e.status,statusText:e.statusText,duration:Date.now()-i},l.prototype.handleError.call(l.prototype,t)}return e})).catch((e=>{throw e.request={method:n,url:s,data:o,duration:Date.now()-i},l.prototype.handleError.call(l.prototype,e),e}))}}listenConsoleErrors(){this.consoleErrorOriginal=console.error,console.error=(...e)=>{this.consoleErrorOriginal.apply(console,e);const t=e[0]instanceof Error?e[0]:Error(e.join(" "));t.fromConsole=!0,this.handleError(t)}}handleError(e){if(s(t.sampling.error))try{const r=function(e){if(e instanceof Event){if(e.target&&"SCRIPT"===e.target.nodeName)return{type:"resource_error",subType:"script",message:"Failed to load script: "+(e.target.src||"inline script"),source:e.target.src||window.location.href,stack:"",lineno:0,colno:0};if(e.target&&"LINK"===e.target.nodeName)return{type:"resource_error",subType:"stylesheet",message:"Failed to load stylesheet: "+(e.target.href||"inline style"),source:e.target.href||window.location.href,stack:"",lineno:0,colno:0};if(e.target&&"IMG"===e.target.nodeName)return{type:"resource_error",subType:"image",message:"Failed to load image: "+(e.target.src||"unknown"),source:e.target.src||window.location.href,stack:"",lineno:0,colno:0};if(e instanceof ErrorEvent)return{type:"js_error",subType:"uncaught",message:e.message||"Unknown error",source:e.filename||window.location.href,stack:e.error&&e.error.stack||"",lineno:e.lineno||0,colno:e.colno||0}}if(e instanceof PromiseRejectionEvent){const t=e.reason;return{type:"promise_error",subType:"unhandled",message:t instanceof Error?t.message:t+"",source:window.location.href,stack:t instanceof Error&&t.stack||"",lineno:0,colno:0}}return e instanceof Error?{type:"js_error",subType:"caught",message:e.message||"Unknown error",source:window.location.href,stack:e.stack||"",lineno:0,colno:0}:{type:"unknown_error",subType:"unknown",message:e+"",source:window.location.href,stack:"",lineno:0,colno:0}}(e);if(function(e,t=[]){if(!e||!e.message)return!0;for(const r of t)if(r instanceof RegExp){if(r.test(e.message))return!0}else if("string"==typeof r&&e.message.includes(r))return!0;return"Script error."===e.message||"Script error"===e.message||!(!e.source||!(e.source.includes("chrome-extension://")||e.source.includes("moz-extension://")||e.source.includes("safari-extension://")))}(r,t.errors.ignoreErrors))return;const i=function(e){if(!e)return"";const t=`${e.name||""}:${e.message||""}:${(e.stack||"").split("\n").slice(0,3).join("")}`;let r=0;for(let e=0;t.length>e;e++)r=(r<<5)-r+t.charCodeAt(e),r|=0;return r.toString(16)}(r);if(this.errorCache.has(i)){const e=this.errorCache.get(i);return e.count++,e.lastSeen=Date.now(),void(e.count%10==0&&this.reportError({...r,fingerprint:i,count:e.count,firstSeen:e.firstSeen,lastSeen:e.lastSeen}))}this.errorCache.set(i,{count:1,firstSeen:Date.now(),lastSeen:Date.now()}),this.errorCount++;const n=Date.now()-this.errorCountStartTime;this.errorCount/n*6e4>t.errors.alertThreshold&&(r.alert=!0),this.isSourceMapSupported&&r.stack?this.parseStackWithSourceMap(r,i):this.reportError({...r,fingerprint:i,count:1,firstSeen:Date.now(),lastSeen:Date.now()})}catch(t){console.error("Error in handleError:",t),this.reportCallback&&this.reportCallback({type:"error",subType:"monitor_error",timestamp:Date.now(),data:{message:t.message,stack:t.stack,originalError:e instanceof Error?e.message:"Non-Error object"}})}}parseStackWithSourceMap(e,t){const r=e.stack.split("\n"),i=[],n=[];r.forEach((e=>{const t=e.match(/at\s+(.+?)\s+\((.+?):(\d+):(\d+)\)/);if(!t)return;const[r,s,o,a,c]=t;if(o.startsWith("http")||o.startsWith("https")){const e=o+".map";if(!this.sourceMapCache.has(e)){const t=fetch(e).then((e=>e.json())).then((t=>(this.sourceMapCache.set(e,t),t))).catch((e=>(console.error("Failed to fetch SourceMap:",e),null)));n.push(t)}i.push({functionName:s,fileName:o,lineNumber:parseInt(a,10),columnNumber:parseInt(c,10)})}else i.push({functionName:s,fileName:o,lineNumber:parseInt(a,10),columnNumber:parseInt(c,10),source:e})})),Promise.all(n).then((()=>{const r=i.map((e=>{if(e.source)return e;const t=this.sourceMapCache.get(e.fileName+".map");if(t)try{const r=this.getMappedPosition(t,e.lineNumber,e.columnNumber);if(r)return{...e,originalFileName:r.source,originalLineNumber:r.line,originalColumnNumber:r.column,originalFunctionName:r.name||e.functionName}}catch(e){console.error("Failed to map position:",e)}return e}));this.reportError({...e,fingerprint:t,count:1,firstSeen:Date.now(),lastSeen:Date.now(),parsedStack:r})})).catch((r=>{console.error("Failed to parse stack with SourceMap:",r),this.reportError({...e,fingerprint:t,count:1,firstSeen:Date.now(),lastSeen:Date.now()})}))}getMappedPosition(e,t,r){if(!e||!e.mappings||!e.sources)return null;const i=e.mappings.split(";");if(0>=t||t>i.length)return null;const n=i[t-1].split(",");let s=null,o=1/0;for(const e of n){const t=this.decodeVLQ(e);if(t&&t.length>=4){const e=Math.abs(t[0]-r);o>e&&(o=e,s=t)}}if(s){const[t,r,i,n,o]=s;return{source:e.sources[r],line:i+1,column:n,name:o>=0&&e.names?e.names[o]:null}}return null}decodeVLQ(e){const t=[];let r=0,i=0;for(let n=0;e.length>n;n++){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(e[n]);if(-1===s)return null;if(r+=(31&s)<<i,32&s)i+=5;else{const e=1&r;r>>=1,t.push(e?-r:r),r=0,i=0}}return t}reportError(e){this.reportCallback&&(e.breadcrumbs=this.breadcrumbs.slice(-10),this.reportCallback({type:"error",subType:e.type,timestamp:Date.now(),data:e}))}addBreadcrumb(e){100>this.breadcrumbs.length||this.breadcrumbs.shift(),this.breadcrumbs.push({...e,timestamp:Date.now()})}destroy(){this.consoleErrorOriginal&&(console.error=this.consoleErrorOriginal),this.errorCache.clear(),this.sourceMapCache.clear(),this.isInitialized=!1}}class u{constructor(){this.queue=[],this.sending=!1,this.timer=null,this.retryCount=0,this.offlineQueue=[],this.maxOfflineQueueSize=100,this.isInitialized=!1,this.supportBeacon=c("sendBeacon"),this.supportLocalStorage=c("localStorage"),this.supportCompression="undefined"!=typeof CompressionStream}init(){this.isInitialized||(this.isInitialized=!0,this.restoreOfflineQueue(),this.startTimer(),document.addEventListener("visibilitychange",(()=>{"hidden"===document.visibilityState?this.flush():"visible"===document.visibilityState&&this.sendOfflineQueue()})),window.addEventListener("beforeunload",(()=>{this.flush()})),window.addEventListener("online",(()=>{this.sendOfflineQueue()})),window.addEventListener("offline",(()=>{this.stopTimer()})))}add(e){this.queue.push(e),t.beacon.batchSize>this.queue.length||this.flush()}flush(){if(0===this.queue.length)return;if(this.sending)return;this.sending=!0,this.stopTimer();const e=[...this.queue];this.queue=[],this.send(e).then((()=>{this.retryCount=0,this.startTimer(),this.sending=!1})).catch((r=>{console.error("Failed to send data:",r),this.retryCount++,t.beacon.retryCount>this.retryCount?(this.queue=[...e,...this.queue],this.startTimer(Math.min(t.beacon.delay*Math.pow(2,this.retryCount),6e4))):(this.addToOfflineQueue(e),this.retryCount=0,this.startTimer()),this.sending=!1}))}async send(e){if(!t.beacon.url)return console.error("Beacon URL is not configured"),Promise.reject(Error("Beacon URL is not configured"));if(!navigator.onLine)return this.addToOfflineQueue(e),Promise.reject(Error("Network is offline"));const r={app_id:t.appId,timestamp:Date.now(),data:e};if(!this.supportBeacon||!t.beacon.useBeacon)return this.sendWithFetch(r);try{const e=JSON.stringify(r);let i;i=this.supportCompression&&t.beacon.compression?await this.compressData(e):new Blob([e],{type:"application/json"});return navigator.sendBeacon(t.beacon.url,i)?Promise.resolve():this.sendWithFetch(r)}catch(e){return console.error("Failed to send data with sendBeacon:",e),this.sendWithFetch(r)}}async sendWithFetch(e){try{const r=JSON.stringify(e);let i,n={"Content-Type":"application/json"};this.supportCompression&&t.beacon.compression?(i=await this.compressData(r),n["Content-Encoding"]="gzip"):i=r;const s=await fetch(t.beacon.url,{method:"POST",headers:n,body:i,signal:AbortSignal.timeout(t.beacon.timeout||1e4),credentials:"omit",mode:"cors",cache:"no-cache"});if(!s.ok)throw Error("HTTP error! status: "+s.status);return Promise.resolve()}catch(e){return console.error("Failed to send data with fetch:",e),Promise.reject(e)}}async compressData(e){if(!this.supportCompression)return new Blob([e],{type:"application/json"});try{const t=new Blob([e]).stream().pipeThrough(new CompressionStream("gzip"));return new Response(t).blob()}catch(t){return console.error("Failed to compress data:",t),new Blob([e],{type:"application/json"})}}startTimer(e=t.beacon.delay){this.stopTimer(),this.timer=setTimeout((()=>{this.flush()}),e)}stopTimer(){this.timer&&(clearTimeout(this.timer),this.timer=null)}addToOfflineQueue(e){this.offlineQueue.push(...e),this.offlineQueue.length>this.maxOfflineQueueSize&&(this.offlineQueue=this.offlineQueue.slice(-this.maxOfflineQueueSize)),this.saveOfflineQueue()}saveOfflineQueue(){if(this.supportLocalStorage)try{const e=JSON.stringify(this.offlineQueue);localStorage.setItem("autotracker_offline_queue",e)}catch(e){console.error("Failed to save offline queue:",e)}}restoreOfflineQueue(){if(this.supportLocalStorage)try{const e=localStorage.getItem("autotracker_offline_queue");e&&(this.offlineQueue=JSON.parse(e))}catch(e){console.error("Failed to restore offline queue:",e),this.offlineQueue=[],localStorage.removeItem("autotracker_offline_queue")}}sendOfflineQueue(){if(0===this.offlineQueue.length)return;if(!navigator.onLine)return;const e=[...this.offlineQueue];this.offlineQueue=[],this.supportLocalStorage&&localStorage.removeItem("autotracker_offline_queue"),this.send(e).catch((t=>{console.error("Failed to send offline queue:",t),this.addToOfflineQueue(e)}))}destroy(){this.stopTimer(),this.flush(),document.removeEventListener("visibilitychange",this.flush),window.removeEventListener("beforeunload",this.flush),window.removeEventListener("online",this.sendOfflineQueue),window.removeEventListener("offline",this.stopTimer),this.isInitialized=!1}}class m{constructor(e={}){this.config=o(t,e),this.sessionId=this.generateSessionId(),this.deviceInfo=function(){const e=navigator.userAgent,t=navigator.platform,r={name:"",version:""},i={name:"",version:""};let n="unknown";return/Edge|Edg/.test(e)?(r.name="Edge",r.version=e.match(/Edge?\/([0-9.]+)/)[1]):/Chrome/.test(e)?(r.name="Chrome",r.version=e.match(/Chrome\/([0-9.]+)/)[1]):/Firefox/.test(e)?(r.name="Firefox",r.version=e.match(/Firefox\/([0-9.]+)/)[1]):/Safari/.test(e)&&!/Chrome/.test(e)?(r.name="Safari",r.version=e.match(/Version\/([0-9.]+)/)[1]):/MSIE|Trident/.test(e)&&(r.name="IE",r.version=e.match(/(?:MSIE |rv:)([0-9.]+)/)[1]),/Windows/.test(e)?(i.name="Windows",i.version=e.match(/Windows NT ([0-9.]+)/)[1]):/Mac/.test(t)?(i.name="MacOS",i.version=e.match(/Mac OS X ([0-9._]+)/)[1].replace(/_/g,".")):/Linux/.test(t)?i.name="Linux":/Android/.test(e)?(i.name="Android",i.version=e.match(/Android ([0-9.]+)/)[1]):/iPhone|iPad|iPod/.test(e)&&(i.name="iOS",i.version=e.match(/OS ([0-9_]+)/)[1].replace(/_/g,".")),n=/Mobile|Android|iPhone|iPad|iPod/.test(e)?"mobile":/Tablet|iPad/.test(e)?"tablet":"desktop",{browser:r,os:i,deviceType:n,screenWidth:window.screen.width,screenHeight:window.screen.height,viewportWidth:window.innerWidth,viewportHeight:window.innerHeight,devicePixelRatio:window.devicePixelRatio||1,language:navigator.language,connection:navigator.connection?{effectiveType:navigator.connection.effectiveType,downlink:navigator.connection.downlink,rtt:navigator.connection.rtt,saveData:navigator.connection.saveData}:null}}(),this.pageInfo=n(),this.beaconSender=new u,this.eventTracker=new d(this.handleReport.bind(this)),this.performanceMonitor=new h(this.handleReport.bind(this)),this.errorMonitor=new l(this.handleReport.bind(this)),this.isInitialized=!1,this.lastActivityTime=Date.now(),this.sessionTimeoutTimer=null,this.config.advanced.autoTrack&&this.init()}init(e={}){return this.isInitialized?this:(Object.keys(e).length>0&&(this.config=o(this.config,e)),window===window.top||this.config.advanced.enableInIframe?this.config.advanced.privacy.respectDoNotTrack&&this.isDoNotTrackEnabled()?(console.warn("AutoTracker is disabled due to DNT setting"),this):(this.isInitialized=!0,this.beaconSender.init(),this.eventTracker.init(),this.performanceMonitor.init(),this.errorMonitor.init(),this.trackEvent("sdk_init",{version:"1.0.0",config:this.sanitizeConfig(this.config),device:this.deviceInfo,page:this.pageInfo}),this.startSessionTimeoutCheck(),this.listenUserActivity(),this.config.debug&&(console.log("AutoTracker initialized with config:",this.config),window.__autoTracker=this),this):(console.warn("AutoTracker is disabled in iframe"),this))}handleReport(e){e.sessionId=this.sessionId,e.device=this.deviceInfo,e.page=this.pageInfo,this.beaconSender.add(e),this.lastActivityTime=Date.now(),this.config.debug&&console.log("AutoTracker report:",e)}trackEvent(e,t={}){return this.isInitialized||this.init(),this.handleReport({type:"event",subType:"custom",name:e,timestamp:Date.now(),data:t}),this}trackError(e,t={}){return this.isInitialized||this.init(),this.errorMonitor.handleError(e),this}trackPerformance(e,t={}){return this.isInitialized||this.init(),this.performanceMonitor.reportMetric(e,t),this}setUserId(e){return this.isInitialized||this.init(),this.userId=e,this.trackEvent("set_user_id",{userId:e}),this}setUserProperties(e={}){return this.isInitialized||this.init(),this.userProperties={...this.userProperties,...e},this.trackEvent("set_user_properties",{properties:e}),this}generateSessionId(){let e=null;try{e=sessionStorage.getItem("autotracker_session_id")}catch(e){console.error("Failed to get session ID from sessionStorage:",e)}if(!e){e=i();try{sessionStorage.setItem("autotracker_session_id",e)}catch(e){console.error("Failed to save session ID to sessionStorage:",e)}}return e}regenerateSessionId(){this.sessionId=i();try{sessionStorage.setItem("autotracker_session_id",this.sessionId)}catch(e){console.error("Failed to save session ID to sessionStorage:",e)}this.trackEvent("session_update",{sessionId:this.sessionId,reason:"timeout"})}startSessionTimeoutCheck(){this.stopSessionTimeoutCheck(),this.sessionTimeoutTimer=setInterval((()=>{const e=Date.now();e-this.lastActivityTime>1e3*this.config.advanced.sessionTimeout&&(this.regenerateSessionId(),this.lastActivityTime=e)}),6e4)}stopSessionTimeoutCheck(){this.sessionTimeoutTimer&&(clearInterval(this.sessionTimeoutTimer),this.sessionTimeoutTimer=null)}listenUserActivity(){const e=()=>{this.lastActivityTime=Date.now()};document.addEventListener("mousemove",e),document.addEventListener("mousedown",e),document.addEventListener("keydown",e),document.addEventListener("touchstart",e),document.addEventListener("scroll",e),document.addEventListener("visibilitychange",(()=>{"visible"===document.visibilityState&&e()}))}isDoNotTrackEnabled(){return"1"===navigator.doNotTrack||"yes"===navigator.doNotTrack||"1"===navigator.msDoNotTrack||"1"===window.doNotTrack}sanitizeConfig(e){const t={...e};return delete t.beacon.url,t}destroy(){this.isInitialized&&(this.trackEvent("sdk_destroy"),this.stopSessionTimeoutCheck(),this.beaconSender.destroy(),this.eventTracker.destroy(),this.performanceMonitor.destroy(),this.errorMonitor.destroy(),document.removeEventListener("mousemove",this.updateActivity),document.removeEventListener("mousedown",this.updateActivity),document.removeEventListener("keydown",this.updateActivity),document.removeEventListener("touchstart",this.updateActivity),document.removeEventListener("scroll",this.updateActivity),this.isInitialized=!1,this.config.debug&&delete window.__autoTracker)}}const p=new m;e.AutoTracker=m,e.default=p,Object.defineProperty(e,"__esModule",{value:!0})}));
